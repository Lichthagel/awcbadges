---
import { getCollection, z } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import AnilistComment from "../components/AnilistComment.astro";
import type { ChallengeEntry } from "../models";

interface Props {
  challenge: ChallengeEntry;
}

export async function getStaticPaths() {
  const challenges = await getCollection("challenge");

  return challenges.map((challenge) => ({
    params: {
      slug: challenge.id,
    },
    props: {
      challenge,
    },
  }));
}

const { challenge } = Astro.props;
---

<BaseLayout>
  {JSON.stringify(challenge)}

  <AnilistComment commentId={challenge.data.url.comment} />
</BaseLayout>
